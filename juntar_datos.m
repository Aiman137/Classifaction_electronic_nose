close all
clc 
clear

% Cargamos el archivo csv
filename = 'putty_Arduino_DataDEF.csv';
data = readtable(filename);

% Buscamos la filas vacias y las eliminamos
empty_rows1 = all(ismissing(data), 2);
data(empty_rows1, :) = [];

new_filename = 'cleaned_putty_Arduino_DataDEF.csv';
writetable(data, new_filename);
M1 = readmatrix('cleaned_putty_Arduino_DataDEF.csv');
%disp(data);

% Cargamos otros datos
data2 = readtable('putty_sensors_data2.csv');

% Buscamos la filas vacias y las eliminamos
empty_rows2 = all(ismissing(data2), 2);
data2(empty_rows2, :) = [];

writetable(data2, 'cleaned_data2.csv');
M2 = readmatrix('cleaned_data2.csv');

figure(1),
plot(data2{2:end, 1});
hold on
plot(data2{2:end, 2});
hold on
plot(data2{2:end, 3});

% Cargamos otros datos
data3 = readtable('putty_sensors_data3.csv');

% Buscamos la filas vacias y las eliminamos
empty_rows3 = all(ismissing(data3), 2);
data3(empty_rows3, :) = [];

writetable(data3, 'cleaned_data2.csv');
M3 = readmatrix('cleaned_data2.csv');

figure(2),
plot(data3{2:end, 1});
hold on
plot(data3{2:end, 2});
hold on
plot(data3{2:end, 3});





figure(3),
plot(data{2:end, 1});
hold on
plot(data{2:end, 2});
hold on
plot(data{2:end, 3});
xline(6280); %%
xline(11380); %%

xline(16560); %%
xline(21660); %%

xline(24305); %%
xline(29405); %%

xline(34300); %%
xline(39400); %%

xline(42045); %%
xline(47145); %%


xline(51850); %%
xline(56950);

xline(59600);
xline(64700);


data_sensors = [M1(6280:11380,1)' M1(6280:11380,2)' M1(6280:11380,3)';
    M1(16560:21660,1)' M1(16560:21660,2)' M1(16560:21660,3)';
    M1(24305:29405,1)' M1(24305:29405,2)' M1(24305:29405,3)';
    M1(34300:39400,1)' M1(34300:39400,2)' M1(34300:39400,3)';
    M1(42045:47145,1)' M1(42045:47145,2)' M1(42045:47145,3)';
    M1(51850:56950,1)' M1(51850:56950,2)' M1(51850:56950,3)';
    M1(59600:64700,1)' M1(59600:64700,2)' M1(59600:64700,3)';];

y = [1 0 1 0 1 0 1];

[U, Z] = pca(data_sensors, 'NumComponents', 3);
figure(4),
scatter(Z(:,1), Z(:,2), 25, y,'filled');


% Cargamos datos 4
% Cargamos el archivo csv
filename4 = 'putty_sensors_data4.csv';
data4 = readtable(filename4);

% Buscamos la filas vacias y las eliminamos
empty_rows1 = all(ismissing(data), 2);
data(empty_rows1, :) = [];

new_filename4 = 'cleaned_putty_Arduino_Data4.csv';
writetable(data4, new_filename4);
M4 = readmatrix('cleaned_putty_Arduino_Data4.csv');

figure(5),
plot(data4{2:end, 1});
hold on
plot(data4{2:end, 2});
hold on
plot(data4{2:end, 3});

xline(6100); %%
xline(12600+3400); %%

xline(16415); %%
xline(22915+3400); %%
 
 
xline(36760); %%
xline(43260+3400); %%
 
xline(47160); %%
xline(57060); %%

xline(67280); %%
xline(73780+3400); %%

xline(77450); %%
xline(83950+3400); %%

xline(97500); %%
xline(104000+3400); %%

xline(107415); %%
xline(113915+3400); %%

xline(125500); %%
xline(132000+3400); %%

xline(135200); %%
xline(141700+3400); %%

xline(155700); %%
xline(162200+3400); %%

xline(165780); %%
xline(172280+3400); %%

xline(185900); %%
xline(192400+3400); %%

xline(195900); %%
xline(202400+3400); %%

xline(216280); %%
xline(222780+3400); %%

xline(226450); %%
xline(232950+3400); %%

xline(244000); %%
xline(250500+3400); %%

xline(254180); %%
xline(260680+3400); %%

xline(274500); %%
xline(281000+3400); %%

xline(284450); %%
xline(290950+3400); %%

xline(304440); %%
xline(310940+3400); %%

xline(314750); %%
xline(321250+3400); %%

xline(334960); %%
xline(341460+3400); %%

xline(345065);
xline(351565+3400);

data_sensors4 = [M4(6100:16000,1)' M4(6100:16000,2)' M4(6100:16000,3)'; %% 9900 -- 1 
    M4(16415:26315,1)' M4(16415:26315,2)' M4(16415:26315,3)'; %% 9900 -- 0
    M4(36760:46660,1)' M4(36760:46660,2)' M4(36760:46660,3)'; %% 9900 -- 1
    M4(47160:57060,1)' M4(47160:57060,2)' M4(47160:57060,3)'; %% 9900 -- 0
    M4(67280:77180,1)' M4(67280:77180,2)' M4(67280:77180,3)'; %% 9900 -- 1
    M4(77450:87350,1)' M4(77450:87350,2)' M4(77450:87350,3)'; %% 9900 -- 0
    M4(97500:107400,1)' M4(97500:107400,2)' M4(97500:107400,3)'; %% 9900 -- 1
    M4(107415:117315,1)' M4(107415:117315,2)' M4(107415:117315,3)'; %% 9900 -- 0
    M4(125500:135400,1)' M4(125500:135400,2)' M4(125500:135400,3)'; %% 9900 -- 1
    M4(135200:145100,1)' M4(135200:145100,2)' M4(135200:145100,3)'; %% 9900 -- 0
    M4(165780:175680,1)' M4(165780:175680,2)' M4(165780:175680,3)'; %% 9900 -- 1
    M4(185900:195800,1)' M4(185900:195800,2)' M4(185900:195800,3)'; %% 9900 -- 0
    M4(195900:205800,1)' M4(195900:205800,2)' M4(195900:205800,3)'; %% 9900 -- 1
    M4(216280:226180,1)' M4(216280:226180,2)' M4(216280:226180,3)'; %% 9900 -- 0
    M4(226450:236350,1)' M4(226450:236350,2)' M4(226450:236350,3)'; %% 9900 -- 1
    M4(244000:253900,1)' M4(244000:253900,2)' M4(244000:253900,3)'; %% 9900 -- 0
    M4(254180:264080,1)' M4(254180:264080,2)' M4(254180:264080,3)'; %% 9900 -- 1 
    M4(274500:284400,1)' M4(274500:284400,2)' M4(274500:284400,3)'; %% 9900 -- 0
    M4(284450:294350,1)' M4(284450:294350,2)' M4(284450:294350,3)'; %% 9900 -- 1
    M4(304440:314340,1)' M4(304440:314340,2)' M4(304440:314340,3)'; %% 9900 -- 0
    M4(314750:324650,1)' M4(314750:324650,2)' M4(314750:324650,3)'; %% 9900 -- 1
    M4(334960:344860,1)' M4(334960:344860,2)' M4(334960:344860,3)'; %% 9900 -- 0
    M4(345065:354965,1)' M4(345065:354965,2)' M4(345065:354965,3)';]; %% 9900 1

y4 = [1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1];

[U4, Z4] = pca(data_sensors4, 'NumComponents', 2);
figure(6),
scatter(Z4(:,1), Z4(:,2), 25, y4,'filled');


% Cargamos datos 5
% Cargamos el archivo csv
filename5 = 'putty_sensors_data5.csv';
data5 = readtable(filename5);

% Buscamos la filas vacias y las eliminamos
empty_rows5 = all(ismissing(data5), 2);
data5(empty_rows5, :) = [];

new_filename5 = 'cleaned_putty_Arduino_Data5.csv';
writetable(data5, new_filename5);
M5 = readmatrix('cleaned_putty_Arduino_Data5.csv');

figure(7),
plot(data5{2:end, 1});
hold on
plot(data5{2:end, 2});
hold on
plot(data5{2:end, 3});

xline(6100); %%
xline(11200); %%

xline(16000); %%
xline(21100); %%

xline(24050); %%
xline(29150); %%

xline(34100); %%
xline(39200); %%

xline(41500); %%
xline(46600); %%

xline(51850); %%
xline(56950); %%

xline(59250); %%
xline(64350); %%

xline(69350); %%
xline(74450); %%

xline(95150); %%
xline(100250); %%

xline(105120); %%
xline(110220); %%

xline(112750); %%
xline(117850); %%

xline(123000); %%
xline(128100); %%

xline(130950); %%
xline(136050); %%

xline(140740); %%
xline(145840); %%

xline(148150);
xline(153250);

xline(158200);
xline(163300);

data_sensors5 = [M5(6100:11200,1)' M5(6100:11200,2)' M5(6100:11200,3)'; %%
    M5(16000:21100,1)' M5(16000:21100,2)' M5(16000:21100,3)'; %% XX
    M5(24050:29150,1)' M5(24050:29150,2)' M5(24050:29150,3)'; %%
    M5(34100:39200,1)' M5(34100:39200,2)' M5(34100:39200,3)'; %%
    M5(41500:46600,1)' M5(41500:46600,2)' M5(41500:46600,3)'; %%
    M5(51850:56950,1)' M5(51850:56950,2)' M5(51850:56950,3)'; %%
    M5(59250:64350,1)' M5(59250:64350,2)' M5(59250:64350,3)'; %%
    M5(69350:74450,1)' M5(69350:74450,2)' M5(69350:74450,3)'; %%
    M5(95150:100250,1)' M5(95150:100250,2)' M5(95150:100250,3)'; %%
    M5(105120:110220,1)' M5(105120:110220,2)' M5(105120:110220,3)'; %%
    M5(112750:117850,1)' M5(112750:117850,2)' M5(112750:117850,3)'; %%
    M5(123000:128100,1)' M5(123000:128100,2)' M5(123000:128100,3)'; %%
    M5(130950:136050,1)' M5(130950:136050,2)' M5(130950:136050,3)'; %%
    M5(140740:145840,1)' M5(140740:145840,2)' M5(140740:145840,3)'; %%
    M5(148150:153250,1)' M5(148150:153250,2)' M5(148150:153250,3)'; %%
    M5(158200:163300,1)' M5(158200:163300,2)' M5(158200:163300,3)';];

y5 = [1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0];

[U5, Z5] = pca(data_sensors5, 'NumComponents', 2);
figure(8),
scatter(Z5(:,1), Z5(:,2), 25, y5,'filled');

data_sensors45 = [M1(6280:11380,1)' M1(6280:11380,2)' M1(6280:11380,3)';
    M1(16560:21660,1)' M1(16560:21660,2)' M1(16560:21660,3)';
    M1(24305:29405,1)' M1(24305:29405,2)' M1(24305:29405,3)';
    M1(34300:39400,1)' M1(34300:39400,2)' M1(34300:39400,3)';
    M1(42045:47145,1)' M1(42045:47145,2)' M1(42045:47145,3)';
    M1(51850:56950,1)' M1(51850:56950,2)' M1(51850:56950,3)';
    M1(59600:64700,1)' M1(59600:64700,2)' M1(59600:64700,3)';
    M5(6100:11200,1)' M5(6100:11200,2)' M5(6100:11200,3)'; %%
    M5(16000:21100,1)' M5(16000:21100,2)' M5(16000:21100,3)'; %% XX
    M5(24050:29150,1)' M5(24050:29150,2)' M5(24050:29150,3)'; %%
    M5(34100:39200,1)' M5(34100:39200,2)' M5(34100:39200,3)'; %%
    M5(41500:46600,1)' M5(41500:46600,2)' M5(41500:46600,3)'; %%
    M5(51850:56950,1)' M5(51850:56950,2)' M5(51850:56950,3)'; %%
    M5(59250:64350,1)' M5(59250:64350,2)' M5(59250:64350,3)'; %%
    M5(69350:74450,1)' M5(69350:74450,2)' M5(69350:74450,3)'; %%
    M5(95150:100250,1)' M5(95150:100250,2)' M5(95150:100250,3)'; %%
    M5(105120:110220,1)' M5(105120:110220,2)' M5(105120:110220,3)'; %%
    M5(112750:117850,1)' M5(112750:117850,2)' M5(112750:117850,3)'; %%
    M5(123000:128100,1)' M5(123000:128100,2)' M5(123000:128100,3)'; %%
    M5(130950:136050,1)' M5(130950:136050,2)' M5(130950:136050,3)'; %%
    M5(140740:145840,1)' M5(140740:145840,2)' M5(140740:145840,3)'; %%
    M5(148150:153250,1)' M5(148150:153250,2)' M5(148150:153250,3)'; %%
    M5(158200:163300,1)' M5(158200:163300,2)' M5(158200:163300,3)';];

y45 = [1 0 1 0 1 0 1 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0];

[U45, Z45] = pca(data_sensors45, 'NumComponents', 2);
figure(9 ),
scatter(Z45(:,1), Z45(:,2), 25, y45,'filled');